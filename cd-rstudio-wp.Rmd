---
layout: page
title: "데이터 과학을 위한 저작도구: Computational Documents"
subtitle: "`RStudio` 워드 프로세서: `hunspell`"
author:
  name: "[Tidyverse Korea](https://www.facebook.com/groups/tidyverse/)"
  url: https://www.facebook.com/groups/tidyverse/
  affiliation: Tidyverse Korea
  affiliation_url: https://www.facebook.com/groups/tidyverse/
date: "`r Sys.Date()`"
output:
  html_document: 
    include:
      after_body: footer.html
      before_body: header.html
    theme: journal
    toc: yes
    toc_depth: 2
    toc_float: true
    highlight: tango
    code_folding: show
    number_section: true
    self_contained: true
bibliography: bibliography.bib
csl: biomed-central.csl
urlcolor: blue
linkcolor: blue
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE,
                      comment="", digits = 3, tidy = FALSE, prompt = FALSE, fig.align = 'center')

library(pdftools)
library(tidyverse)
library(magick)

```


# 맞춤법 검사 {#check-spelling}

[Hunspell](hunspell.github.io)은 `MySpell`에 기반을 두고 있으며 MySpell 사전과 하위 호환되는데, `MySpell`이 싱글 바이트 문자 인코딩을 사용하는 반면, `Hunspell`은 **유니코드 UTF-8 인코딩 사전**을 사용할 수 있다. Hunspell은 처음에 헝가리어를 대상으로 설계되었으나, 풍부한 형태론 및 합성어, 문자 인코딩을 포함한 맞춤법 검사기이자 형태론 분석기의 하나로 자리잡았다. 

오픈 소스 소프트웨어 기반으로 맞춤법을 실시하는 것이 경우에 따라서는 더 성능이 좋다. 하지만, 이를 위해서 몇가지 사전 준비를 해야 한다. 먼저 `hunspell` 소프트웨어를 설치하고 맞춤법 검사를 위한 언어사전(영어, 한국어)을 각각 설치한다.

## 맥OS `hunspell` 설치 {#hunspell-mac-install}

맥에서 `hunspell`을 설치하는 방법은 단순하다.

```{r macos-install-hunspell, eval = FALSE}
brew install hunspell
```

## 영어 사전 {#dictionary-english}

[libreoffice/dictionaries](https://cgit.freedesktop.org/libreoffice/dictionaries/tree/) 웹사이트에서 필요한 언어 사전(영어, `en_US`)을 다운로드 받아 `~/Library/Spelling/` 디렉토리에 복사하여 넣어둔다. 필요한 파일은 확장자가 `.aff`, `.dic`를 갖는 언어사전 파일이다.

```{r download-dictionary, eval = FALSE}
download.file(url = "https://cgit.freedesktop.org/libreoffice/dictionaries/plain/en/en_US.aff", destfile = "~/Library/Spelling/en_US.aff")
download.file(url = "https://cgit.freedesktop.org/libreoffice/dictionaries/plain/en/en_US.dic", destfile = "~/Library/Spelling/en_US.dic")
```

## 한국어 사전 {#hunspell-dictionary}

[`hunspell` 한국어 맞춤법 사전](https://github.com/spellcheck-ko/hunspell-dict-ko)은 오픈소스 데스크톱에 널리 사용되는 **hunspell 맞춤법 검사 프로그램**에서 동작하는 (현재 유일한) 한국어 맞춤법 사전으로 [`hunspell-dict-ko`: `hunspell` 한국어 사전](https://github.com/spellcheck-ko/hunspell-dict-ko/releases)을 다운로드 받아, 압축을 풀게 되면 `ko.aff`, `ko.dic` 파일이 두개 나오게 된다. 
영어 사전과 마찬가지로 웹사이트에서 필요한 언어 사전(영어, `en_US`)을 다운로드 받아 `~/Library/Spelling/` 디렉토리에 복사하여 넣어둔다.

`hunspell -D` 명령어를 통해 맞춤법을 확인을 위한 설치된 언어 사전을 확인할 수 있다.

```{bash check-dictionary}
hunspell -D
```


# RStudio IDE [^rstudio-ide-spell] {#hunspell-rstudio}

[^rstudio-ide-spell]: [Josh Paulson (2020-07-28), "Spelling Dictionaries" RStudio Blog](https://support.rstudio.com/hc/en-us/articles/200551916)


# 쉘에서 맞춤법 검사 [^hunspell-tutorial] {#spellcheck-bash}

[^hunspell-tutorial]: [Xah Lee (2010-06-16), "Hunspell Tutorial"](http://xahlee.info/comp/hunspell_spell_checking.html)

## 인터랙티브 방식 {#hunspell-interactive}

인터랙티브 방식으로 사전을 정의하고 나서 맞춤법 검사를 진행할 파일을 지정하면 해당 파일에 대한 맞춤법 검사를 진행할 수 있게 된다.

```{bash hello-world-hunspell, eval = FALSE}
echo "Hello World! \n Thiss is Great." > data/hunspell_test.txt

hunspell -d en_US data/hunspell_test.txt

        Thiss           File: data/hunspell_test.txt

Hello World! \n Thiss is Great.

 0: Hiss
 1: T hiss
 2: This
 3: Thins
 4: This s

[SPACE] R)epl A)ccept I)nsert U)ncap S)tem Q)uit e(X)it or ? for help
```

## 배치 방식 {#hunspell-batch}

배치방식으로 `-l` 플래그를 사용하게 되면 철자법 검사에서 검출된 사례만 뽑을 수 있다.

```{bash hunspell-batch}
hunspell -l -d en_US -i utf-8 data/hunspell_test.txt 
```

# 한글 {#check-spelling-korean}

[자주 틀리는 한글 맞춤법 사례](http://blog.daum.net/woalsdlvjxld/5808471) 블로그에 올라온 사례를 가지고 한글 맞춤법을 확인해보자. 

- 기둥에 머리를 {받치다/**받히다**}
- 아이가 밥을 {**넙죽**/넓죽} 잘도 받아먹는다.
- 신문 {**스포츠난**/스포츠란}에 기사가 났다

```{bash spell-check-korean}
echo "기둥에 머리를 받치다. \n 아이가 밥을 넓죽 잘도 받아먹는다.\n 신문 스포츠란에 기사가 났다" > data/hunspell_korean.txt
hunspell -l -d ko -i utf-8 data/hunspell_korean.txt 
```

